---
title: "lab3"
author: "Котов Иван, РИ-440004"
date: '22 октября 2017 г '
output: html_document
---
Задание 1
1. Используйте команду readLines для загрузки файла в текстовый вектор html.
```{r}
forbes<-readLines("https://raw.githubusercontent.com/SergeyMirvoda/MD-DA-2017/master/data/forbes.htm", warn=FALSE)
```
i.Сколько строк в файле?
```{r}
length(forbes)
```
i.i.Сколько символов в файле?
```{r}
sum(nchar(forbes))
```
2.Откройте файл в текстовом редакторе. Найдите строки, содержащие данные о Билле Гейтсе и Ларри Эллисоне и запомните размер их дохода.
3.Напишите шаблон регулярного выражения и используйте функцию grep, чтобы извлечь размер дохода из данных в векторе html. Удостоверьтесь, что полученный вектор номеров строк содержит содержит ровно 100 записей и ссылается на номера строк в котрых действительно есть информация о доходе, а не просто первый попавшийся текст.
```{r}
template <- "[$](\\d{1,2}[,]?\\d?)\\s"
result<-grep(template,forbes)
length(result)
```
4.Напишите код, использовав регулярное выражение из п. 3, и функции regexp и regmatches, чтобы извлечь все данные о доходе. Проверьте следующее:
Должно быть ровно сто значений.
i.Должно быть ровно сто значений.
```{r}
result.data<-regexpr(template,forbes)
values<-regmatches(forbes,result.data)
length(values)
values
```
ii.Самый большой доход должен быть доход Билла Гейтса
```{r}
values[1]
```
iii.Такой доход должен быть в списке один раз.
```{r}
length(values[values=="$72 "])
```
iv.В всписке должна быть цифра, которую мы запомнили для Ларри Эллисона.
```{r}
values[3]
```
v.Должно быть как минимум два значения, встречающихся несколько раз.
```{r}
length(values[values=="$36 "])
length(values[values=="$4,6 "])
```
Задание 2

5.В данных доход представлен в формате "$42 B", что означает 42 ?? 10^9. Преобразуйте этот формат в числовой и сохраните в вектор worths.
```{r}
temp.1<-substr(values,2,nchar(values))
temp.2<-sub(",",".",temp.1)
worths<-as.numeric(temp.2)*10**9
```
Удостоверьтесь в следующем:
i.worths является вектором и в нём сто занчений типа double.
```{r}
typeof(worths)
length(worths)
```
ii.Все элементы вектора worths больше 1 миллиарда.
```{r}
length(worths[worths>=10**9])
```
iii.Самое большое число это доход Билла Гейтса.
```{r}
max(worths)
```
6.Используйте вектор worths , чтобы выяснить следующее:
i.Какова медиана ста этих записей?
```{r}
median(worths)
```
ii.Средний доход?
```{r}
mean(worths)
```
iii.Как много людей из этого списка имеют доход больше 5млрд., 10, 25?
```{r}
length(worths[worths>5*10**9])
length(worths[worths>10*10**9])
length(worths[worths>25*10**9])
```
iv.Какой их общий доход?
```{r}
sum(worths)
```
v.Какую долю от общего дохода, составляет пятёрка самых богатых.
```{r}
sum(worths[1:5])*100/sum(worths)
```
vi.Какую долю от общего дохода, составляют 20 самых богатых.
```{r}
sum(worths[1:20])*100/sum(worths)
```
vii.В данных федерального резерва США найдите показатель дохода всех домохозяйств (Household net worth) в соответвующем году, какую долю общего дохода составляют 100 богатейших людей.
```{r}
Hnw<-78.536*10**9
100*Hnw/sum(worths)
```